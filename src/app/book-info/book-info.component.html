<navbar></navbar>
    <div class="container">
        <div class="row" style="float:left"> <!--book info-->
            <div class="media">
                <div class="col-md-2" id="leftCol">
                    <img id="bookCover" src={{myBook?.img_url}} class="align-self-start mr-3">
                    <app-dropdown id="shelf" [bookId]="myBook?.id" [shelfId]="userInfo?.shelf_name"></app-dropdown>
                    <app-star id="rateBook" (rated)="open($event)" [bookId]="myBook?.id" [shelf]="userInfo?.shelf_name" [readOnly]="false"></app-star>
                </div>
                <div class="media-body" id="bookInfo">
                    <div class="col-md-9">
                        <h1 id="Booktitle">{{myBook?.title}}</h1>
                        <h5 id="authorName">by {{myBook?.author_name}}</h5>
                        <div>
                            <app-star [starsCount]="myBook?.ratings_avg" [readOnly]="true"></app-star>
                            <span style="font-size: 13px; font-family: 'Segoe UI', Tahoma, sans-serif;">{{myBook?.ratings_avg}}   {{myBook?.ratings_count}} ratings {{myBook?.reviews_count}} reviews</span>
                        </div>
                        <p>{{myBook?.description}}</p>
                        <div id="bookFormat">
                            <p>Paperback {{myBook?.pages_no}} pages</p>
                            <p>Published {{myBook?.publication_date}} by {{myBook?.publisher}}</p>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </div>

            </div>
        </div>
    </div>

    <div class="container" *ngIf="isUser && userInfo" id="activity">
        <h6>MY ACTIVITY</h6>
        <hr>
        <div class="row" >
            <div class="col-2" style="min-width: 50px">
                <p>Review Of</p>
                <p>shelf</p>
                <p>Rating</p>
                <p>Review</p>
            </div>
            <div class="col-8" style="min-width: 300px">
                <p>{{myBook?.isbn}}</p>
                <p>{{userInfo?.shelf_name}}</p>
                <app-star [starsCount]="userInfo?.rating" [readOnly]="true"></app-star>
                <p>{{userInfo?.body}}</p>
            </div>
        </div>
    </div>

    <div class="container">
        <hr>
        <div class="row" style="float: down">
            <div class="media" *ngFor="let review of reviews">
                <img  [routerLink]="['/profile',review.user_id]" id="reviewerImg" src={{review?.userimagelink}} class="align-self-start mr-3" style="width:50px; height: 50px">
                <div class="media-body" id="reviewInfo">
                    <h6 ><b [routerLink]="['/profile',review.user_id]" id="reviewerName">{{review?.username}}</b> rated it <app-star  [starsCount]="review?.rating" [readOnly]="true"></app-star></h6>
                    <p>{{review?.body}}</p>
                    <small>{{review?.numberLikes}} like

                     <app-likes [user]='review.userId' [resourse_id]= 'review.id' ></app-likes>

                      {{review?.numberComments}} Comments
                       <app-comments  [user]='review.userId' [resourse_id]='review.id' ></app-comments>


                    </small>
                </div>

            </div>
        </div>
    </div>



      <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">


            <div class="modal-header">
                <h5 class="modal-title">Review of {{myBook?.title}}</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>


              <div class="modal-body" style="margin-bottom:5px; padding-bottom: 0px;">
                      <div class="row" style="margin-bottom:0px">
                              <div class="col-2" style="width: 100%">
                                  <p>My rating</p>
                                  <p>Book shelf</p>
                              </div>
                              <div class="col-8" style="width: 100%">
                                  <app-star [starsCount]="userInfo?.rating"  [readOnly]="false" [bookId]="myBook?.id" [shelf]="userInfo?.shelf_name"></app-star>
                                  <br>
                                  <div class="dropdown" style="width:200px;">
                                    <button (click)="openShelves()" class="dropbtn">choose shelves..</button>
                                    <div id="myDropdown" class="dropdown-content">
                                      <input type="text" placeholder="Search.." id="myInput" (keyup)="filterFunction()">
                                      <a><input type="radio" name="group1" (click)="info.shelf_name=0; modelShelf='read';">read</a>
                                      <a><input type="radio" name="group1" (click)="info.shelf_name=1; modelShelf='currently reading';">currently reading</a>
                                      <a><input type="radio" name="group1" (click)="info.shelf_name=2; modelShelf='want to read';">want to read</a>
                                    </div>
                                  </div>
                                  <span style="color: #00635d;  margin-left: 10px;">{{modelShelf}}</span>

                      </div>
              </div>
              <p >What did you think?</p>
              <textarea rows="10" cols="92" wrap="physical" [(ngModel)]="info.body" ></textarea>


              <div class="modal-footer" style="border:none;">
                <button type="button" id="save" data-dismiss="modal" (click)="review()">Save</button>
              </div>

            </div>
          </div>
        </div>
      </div>

      <button type="button" id="openModalButton" data-toggle="modal" data-target="#myModal" style="display: none;"  ></button>


      <!--
          <div>
                                      <input type="radio" (click)="info.shelf_name=0">
                                      <label style="margin-right:10px">read</label>
                                      <input type="radio" (click)="info.shelf_name=1">
                                      <label style="margin-right:10px">currently reading</label>
                                      <input type="radio" (click)="info.shelf_name=2">
                                      <label style="margin-right:10px">want to read</label>
                                  </div>
      -->